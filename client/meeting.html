<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='/css/videoport.css'>
    <link rel="icon" type="image/svg+xml" href="/assets/PantheonMEETSfavicon.svg" size="128x128">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"
      integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/CSSRulePlugin.min.js"
      integrity="sha512-IxxYrSNXnt/RJlxNX40+7BQL88FLqvdpVpuV9AuvpNH/NFP0L8xA8WLxWTXx6PYExB5R/ktQisp6tIrnLn8xvw=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
      <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
      <script src="https://unpkg.co/gsap@3/dist/gsap.min.js"></script>

</head>

<body>
    <title>PantheonMEETS - In a meeting</title>

    <!--
        
    
    <div id="login-form">
        <h2>Loading... (Don't enter anything)</h2>
        <input type="text" id="username" placeholder="Username" required>
        <!- <input type="text" id="meetingId" placeholder="Meeting ID" required> ->
        <button id="join-meeting-btn">Join</button>
    </div>-->
    <audio id="audioPlayer" src="../callJoin.mp3" style="display: none;"></audio>
    <audio id="audioPlayerLeave" src="../leavemet.mp3" style="display: none;"></audio>


    <div id="stream-wrapper">
        <!-- <button id="join-btn">Join Stream</button> -->
        <div id="video-streams"></div>

        <div id="stream-controls">
            <button id="leave-btn">Leave Stream</button>
            <button id="mic-btn">Mic On</button>
            <button id="camera-btn">Camera On</button>
            <button id="screenshare-btn">Screenshare</button>
            <button id="whiteboard-btn">Open Whiteboard</button>
            <button id="erase-btn">Start Erase</button>
            <button id="save-btn">Save Whiteboard Image</button>
        </div>
    </div>

    
    <div id="captions-column">

        <div id="captionTitle">Captions</div>

        <select name="Select Language" id="language" class="lang">
            <option value="1">English</option>
            <option value="2">Spanish</option>
            <option value="3">French</option>
            <option value="4">Chinese</option>
            <option value="5">Arabic</option>
            
        </select>

        <div class="capContainer2">
            <div class="capContainer">
                <div id="captions"></div>
            </div>
            <input id="chatbox" placeholder="Message the meeting..."/>

            
            <script>
                const usernameInput = document.getElementById('username');
                const btn = document.getElementById('join-meeting-btn');

                const lan = document.getElementById('language');
                const capsT = document.getElementById('captionTitle');
                const chat = document.getElementById('chatbox');
                
                /*
                btn.addEventListener("click", function() {
                    console.log("-" + usernameInput + "-");
                    if ((usernameInput.value.trim() == "") == false) { // Checks if button is pressed and username is valid (not empty)
                        lan.style.opacity = '1';
                        capsT.style.opacity = '1';
                        chat.style.opacity = '1';
                    }
                    
                });*/


            </script>

            <script>
                const scrollCaps = document.getElementsByClassName("capContainer2");

                const currentPosition = captionsContainer.scrollTop;    
                console.error("CURRENT POSITION: "+ currentPosition);

                while (true) {
                    for (const scrollCap of scrollCaps) {        
                        scrollCap.scroll(0, scrollCap.scrollHeight);    
                    }
                }
                
            </script>
            <script>
                 const textInput = document.getElementById('chatbox');
                 textInput.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter') {
                        updateCaptions(textInput.value);
                        textInput.value = "";
                    }
                    });
            </script>
        </div>

        <script>
            import gsap from "gsap";
    
            $(window).on("load", function () {
                const tl = gsap.timeline({});

                tl.to('#login-form', {y: '-=100px', ease: "expo.out", duration: 1.0}, "-=1.0");
            });
        </script>


        

        
    </div> 



    <!-- <div id="captions" class="captions-container"></div>  -->
    <!-- <script src="https://download.agora.io/sdk/release/AgoraRTC_N.js"></script> -->
    <script src="/js/AgoraRTC_N-4.20.2.js"></script>
    <!-- <script src="./js/agora-rtm.js"></script> -->
    <script src="/js/agora-rtm-sdk/index.js"></script>
 
    <!-- MEDIAPIPE STUFF -->

    <!-- <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet"> -->
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js" ></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous" ></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous" ></script>

    <!-- <script type="module" src="/js/tasks-vision/vision_bundle.mjs"></script> -->
    
    <script src="https://js.pusher.com/8.2.0/pusher.min.js"></script>


    <script src='/js/main.js' defer></script>

</body>
    

</html>